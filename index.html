<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tieg Digital</title>

<style>
body{
margin:0;
font-family:Arial,Helvetica,sans-serif;
background:#0b1020;
color:#fff
}
header{
display:flex;
justify-content:space-between;
align-items:center;
padding:14px 28px;
background:#0f172a
}
.logo{
font-size:20px;
font-weight:bold
}
.btn{
background:#0ea5e9;
border:none;
padding:8px 14px;
border-radius:6px;
color:#fff;
cursor:pointer;
margin-left:8px
}
.hero{
text-align:center;
padding:70px 20px
}
.hero h1{margin:0 0 10px}
.pricing{
display:flex;
gap:20px;
justify-content:center;
flex-wrap:wrap;
padding:40px
}
.card{
background:#111936;
padding:22px;
border-radius:12px;
width:260px;
text-align:center
}
.buy{
margin-top:14px;
background:#0ea5e9;
border:none;
padding:10px 18px;
border-radius:6px;
color:#fff;
cursor:pointer
}

/* CHAT */
#chatPanel{
position:fixed;
right:0;
top:0;
height:100%;
width:50%;
background:#0f172a;
display:none;
flex-direction:column;
z-index:10
}
@media(max-width:768px){
#chatPanel{width:100%}
}
#chatHeader{
padding:14px;
background:#111936;
display:flex;
justify-content:space-between;
align-items:center
}
#chatMessages{
flex:1;
overflow-y:auto;
padding:14px
}
.msg{
padding:8px 12px;
border-radius:8px;
margin:6px 0;
max-width:75%
}
.userMsg{
background:#0ea5e9;
margin-left:auto
}
.adminMsg{
background:#1e293b
}
#chatInputBox{
display:flex;
padding:10px;
background:#111936
}
#chatInput{
flex:1;
padding:8px;
border:none;
border-radius:6px
}

/* MODALS */
.modal{
display:none;
position:fixed;
inset:0;
background:#0008;
align-items:center;
justify-content:center;
z-index:20
}
.modalBox{
background:#111936;
padding:20px;
border-radius:10px;
width:260px
}
.modalBox input{
width:100%;
padding:8px;
margin:6px 0;
border:none;
border-radius:6px
}
</style>
</head>

<body>

<header>
<div class="logo">Tieg Digital</div>
<div>
<button class="btn" onclick="showLogin()">Login</button>
<button class="btn" onclick="showSignup()">Sign Up</button>
<button class="btn" onclick="logout()">Logout</button>
</div>
</header>

<section class="hero">
<h1>Premium Business Website</h1>
<p>Professional website solution with live support and admin chat.</p>
</section>

<section class="pricing">
<div class="card">
<h3>Basic</h3>
<p>$300</p>
<button class="buy" onclick="openChat()">Buy</button>
</div>

<div class="card">
<h3>Standard</h3>
<p>$500</p>
<button class="buy" onclick="openChat()">Buy</button>
</div>

<div class="card">
<h3>Premium</h3>
<p>$900</p>
<button class="buy" onclick="openChat()">Buy</button>
</div>
</section>

<!-- CHAT -->
<div id="chatPanel">
<div id="chatHeader">
<span>Live Chat</span>
<button class="btn" onclick="closeChat()">Back</button>
</div>
<div id="chatMessages"></div>
<div id="chatInputBox">
<input id="chatInput" placeholder="Type message...">
<button class="btn" onclick="sendMsg()">Send</button>
</div>
</div>

<!-- LOGIN -->
<div id="loginModal" class="modal">
<div class="modalBox">
<h3>Login</h3>
<input id="loginEmail" placeholder="Email">
<input id="loginPass" type="password" placeholder="Password">
<button class="btn" onclick="login()">Login</button>
</div>
</div>

<!-- SIGNUP -->
<div id="signupModal" class="modal">
<div class="modalBox">
<h3>Sign Up</h3>
<input id="signupEmail" placeholder="Email">
<input id="signupPass" type="password" placeholder="Password">
<button class="btn" onclick="signup()">Create</button>
</div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
const firebaseConfig={
apiKey:"AIzaSyDzeFZfqReHMHaZMlIfrfqAyjG3v2nfj-4",
authDomain:"content-platform-5a902.firebaseapp.com",
projectId:"content-platform-5a902",
storageBucket:"content-platform-5a902.appspot.com",
messagingSenderId:"242934744688",
appId:"1:242934744688:web:a9f8c5eaee8242e62516b5"
};

firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();

const ADMIN_EMAIL="tiegmicheal@gmail.com";
let currentUser=null;
let unsubscribe=null;

auth.onAuthStateChanged(user=>{
currentUser=user;
if(user){
startChatListener();
}
});

function showLogin(){loginModal.style.display="flex"}
function showSignup(){signupModal.style.display="flex"}

function login(){
auth.signInWithEmailAndPassword(loginEmail.value,loginPass.value)
.then(()=>loginModal.style.display="none")
.catch(()=>alert("Incorrect email or password"));
}

function signup(){
auth.createUserWithEmailAndPassword(signupEmail.value,signupPass.value)
.then(()=>signupModal.style.display="none")
.catch(()=>alert("Signup failed"));
}

function logout(){
auth.signOut();
chatPanel.style.display="none";
chatMessages.innerHTML="";
}

function openChat(){
if(!currentUser){
showLogin();
return;
}
chatPanel.style.display="flex";
}

function closeChat(){
chatPanel.style.display="none";
}

function sendMsg(){
const text=chatInput.value.trim();
if(!text||!currentUser)return;

const convo=db.collection("conversations").doc(currentUser.uid);

convo.set({
userEmail:currentUser.email,
updatedAt:Date.now(),
lastMessage:text
},{merge:true});

convo.collection("messages").add({
text:text,
sender:currentUser.email===ADMIN_EMAIL?"admin":"user",
time:Date.now()
});

chatInput.value="";
}

function startChatListener(){
if(unsubscribe)unsubscribe();

unsubscribe=db.collection("conversations")
.doc(currentUser.uid)
.collection("messages")
.orderBy("time")
.onSnapshot(snap=>{
chatMessages.innerHTML="";
snap.forEach(doc=>{
const m=doc.data();
const div=document.createElement("div");
div.className="msg "+(m.sender==="admin"?"adminMsg":"userMsg");
div.textContent=(m.sender==="admin"?"Admin: ":"You: ")+m.text;
chatMessages.appendChild(div);
});
chatMessages.scrollTop=chatMessages.scrollHeight;
});
}
</script>

</body>
</html>